<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="author" content="washble">
    <meta name="description" content="washble CameraCapture">
    <meta name="keyword" content="washble,Camera,Capture">
    <meta name="generator" content="only html">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CameraCapture Bootstrap Template - Index</title>
    
    <meta name="naver-site-verification" content="02ff33738966c4b5cf075685d75d659dfd64d469" />
    
    <link rel="canonical" href="https://washble.github.io/CameraJS/index.html">
    
    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon">
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
    
    <!-- Vendor CSS Files -->
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
    
    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet">
    
    <!-- =======================================================
    * Template Name: eNno
    * Updated: Mar 10 2023 with Bootstrap v5.2.3
    * Template URL: https://bootstrapmade.com/enno-free-simple-bootstrap-template/
    * Author: BootstrapMade.com
    * License: https://bootstrapmade.com/license/
    ======================================================== -->
</head>
<body>
    <div class="container-fluid full-height">
        <div class="row justify-content-center align-items-center w-100 h-100">
            <div class="col-12 p-0 m-0">
                <h2 class="d-none">Take a Photo with the Camera</h2>
                <video id="video" autoplay></video>
                <canvas id="canvas" class="d-none" width="640" height="480"></canvas>
            </div>
        </div>
    </div>
<script>
    // Get the video stream
    navigator.mediaDevices.getUserMedia({ video: { facingMode: { exact: "environment" } } })
    .then(function(stream) {
        var video = document.getElementById('video');
        video.srcObject = stream;
        video.play();
    })
    .catch(function(err) {
        console.log("An error occurred: " + err);
    });

    // Function to take the photo
    function takePhotoAndDownload() {
        var canvas = document.getElementById('canvas');
        var context = canvas.getContext('2d');
        var video = document.getElementById('video');

        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;

        context.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);

        // Convert the canvas image to a data URL
        var dataURL = canvas.toDataURL('image/png');

        // Create a temporary download link and click it
        var downloadLink = document.createElement('a');
        downloadLink.href = dataURL;
        downloadLink.download = 'photo.png';
        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);
    }

    // Detect touch at the top of the screen
    document.body.addEventListener('touchstart', function(event) {
        if (event.touches[0].clientY < window.innerHeight * 0.5) {
            takePhotoAndDownload();
        }
    });

    // Open Full Screeen
    function openFullscreen() {
        if (document.documentElement.requestFullscreen) {
          document.documentElement.requestFullscreen();
        } else if (document.documentElement.mozRequestFullScreen) { /* Firefox */
          document.documentElement.mozRequestFullScreen();
        } else if (document.documentElement.webkitRequestFullscreen) { /* Chrome, Safari & Opera */
          document.documentElement.webkitRequestFullscreen();
        } else if (document.documentElement.msRequestFullscreen) { /* IE/Edge */
          document.documentElement.msRequestFullscreen();
        }
    }

    // Close Full Screen
    function closeFullscreen() {
        if (document.exitFullscreen) {
          document.exitFullscreen();
        } else if (document.mozCancelFullScreen) { /* Firefox */
          document.mozCancelFullScreen();
        } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
          document.webkitExitFullscreen();
        } else if (document.msExitFullscreen) { /* IE/Edge */
          document.msExitFullscreen();
        }
    }

    window.onload = () => {
        openFullscreen();
    }
</script>

</body>
</html>
